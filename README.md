# Secure and Highly Available Kong Gateway

This project shows how to set up a highly available API gateway using Kong Gateway. It includes 2 instances of Kong, balanced by an Nginx server, and 3 simple examples of microservices to showcase the advantages of using an API gateway. Some tests are provided to simulate requests from clients. The app uses Docker.

## Features

- **High Availability**: 2-instance Kong setup using nginx for load balancing, fault tolerance and circuit breaking.
- **Security**: SSL encryption for client-gateway communication.
- **Microservices**:
    - **Service 1**: 3-instance microservice for testing how Kong can manage load balancing, fault tolerance and circuit breaking.
    - **Service 2**: 1-instance microservice for testing how Kong can manage authentication and authorization of the API calls.
    - **Service 3**: 1-instance microservice for testing Kong rate limit functionality.
- **SSL certificates generator**: script to generate self-signed SSL certificates.

## Prerequisites

- Docker and Docker Compose
- OpenSSL

## Setup Instructions

1. **Clone the repository**
    ```
    git clone https://github.com/TechLory/kong-gateway-ha.git
    cd kong-gateway-ha
    ```

2. **Generate SSL certificates**
   
    Make the script `generate-certs.sh` executable and run it:
    ```
    chmod +x generate-certs.sh
    ./generate-certs.sh
    ```
    This will create a directory `/certs` with the certificates.

## Project Structure

- `docker-compose.yml`: Main configuration file for the Docker setup.
- `generate-certs.sh`: Script to generate SSL certificates.
- `/client`: Contains bash scripts to test the microservices.
- `/services`: Contains the 3 microservices.
- `/config`: Contains Kong and Nginx configuration files.
- `/certs`: Directory where SSL certificates are stored (generated by the script).

## Troubleshooting

- If you encounter connection issues, ensure that all containers are healthy and that the SSL certificates were generated correctly.
- Check the logs of individual services:
  ```
  docker-compose logs [service_name]
  ```

---

For any questions or issues, please open an issue in the GitHub repository.